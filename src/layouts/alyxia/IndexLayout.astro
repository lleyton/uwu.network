---
import "#css/reset.css";
import "#css/loader.css";
import "#css/common.css";
import "#css/scanlines.css";

import loadtsuki from "#/img/loader/loadtsuki.png";
import loadspin from "#/img/loader/loadspin.png";
import loadfinish from "#/img/loader/loadfinish.png";
---

<div id="contentloader">
  <img id="loadtsuki" src={loadtsuki} />
  <img id="loadspin" src={loadspin} />
</div>

<slot />

<script define:vars={{ loadspin, loadfinish }}>
	window.addEventListener("load", function(event) {
		document.getElementById("contentloader").className = "destroyedloader";
		document.getElementById("loadspin").src = loadfinish;
	});

	window.onbeforeunload = function() {
		document.getElementById("contentloader").classList.remove("destroyedloader");
		document.getElementById("loadspin").src = loadspin;
	}
</script>
